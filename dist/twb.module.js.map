{"version":3,"file":"twb.module.js","sources":["../src/classNames.ts","../src/noop.ts","../src/domReady.ts","../src/randomId.ts","../src/useUpdatedValues.ts","../src/useTextChangeHandler.ts","../src/useToggle.ts","../src/useState.ts","../src/mountReact.ts"],"sourcesContent":["type Arg = string | Record<string, any> | undefined | null | number | Arg[];\n\nconst argToArr = (argOrArgs: Arg): string[] => {\n  if (typeof argOrArgs === 'string' || typeof argOrArgs === 'number') {\n    return [`${argOrArgs}`];\n  } else if (Array.isArray(argOrArgs)) {\n    let classNames: string[] = [];\n\n    for (let i = 0; i < argOrArgs.length; i++) {\n      const argClassNames = argToArr(argOrArgs[i]);\n      for (let ci = 0; ci < argClassNames.length; ci++) {\n        classNames.push(argClassNames[ci] as string);\n      }\n    }\n    return classNames;\n  } else {\n    const classNames: string[] = [];\n    for (let key in argOrArgs) {\n      if (argOrArgs[key]) {\n        classNames.push(key.trim());\n      }\n    }\n    return classNames;\n  }\n};\n\nexport const classNames = (...args: Arg[]): string => {\n  const classNames: string[] = [];\n  for (let i = 0; i < args.length; i++) {\n    if (args[i]) {\n      const classNameStrings = argToArr(args[i] as Arg);\n      for (let ci = 0; ci < classNameStrings.length; ci++) {\n        let className = classNameStrings[ci];\n        if (className) {\n          className = className.trim();\n          if (!classNames.includes(className)) {\n            classNames.push(className);\n          }\n        }\n      }\n    }\n  }\n  return classNames.join(' ');\n};\n","export const noop = () => {};\n","import { noop } from './noop';\n\nexport type DomReadyArg = (e?: Event) => void;\nexport type DomReadyReturn = () => void;\n\nconst eventName: string = 'DOMContentLoaded';\nconst isIframe: boolean = 'doScroll' in document.documentElement;\nlet isLoaded: boolean = !!document.readyState.match(isIframe ? /^loaded|^c/ : /^loaded|^i|^c/);\n\nconst onLoad = function () {\n  isLoaded = true;\n  document.removeEventListener(eventName, onLoad);\n};\n\nif (!isLoaded) {\n  document.addEventListener(eventName, onLoad);\n}\n\n/**\n * Helper that will fire provided function if DOM is already loaded or after it will be loaded.\n * @param addedListener\n */\nexport const domReady = (addedListener: DomReadyArg): DomReadyReturn => {\n  if (!isLoaded) {\n    const handler = function (e: Event) {\n      document.removeEventListener('eventName', addedListener);\n      addedListener(e);\n    };\n\n    document.addEventListener(eventName, handler);\n    return function () {\n      document.removeEventListener(eventName, handler);\n    };\n  } else {\n    window.setTimeout(() => addedListener(undefined), 0);\n    return noop;\n  }\n};\n","export const randomId = (length?: number): string => {\n  let id = '';\n  if (!length || length <= 0) {\n    length = 6;\n  }\n  while (id.length < length) {\n    id += Math.random().toString(16).slice(2);\n  }\n  return id.slice(0, length);\n};\n\nlet currentId = 0;\nexport const nextId = (): string => {\n  return (currentId++).toString(16);\n};\n\nexport const fakeUuid = (): string => {\n  const chars = randomId(32);\n  return `${chars.slice(0, 8)}-${chars.slice(8, 12)}-${chars.slice(12, 16)}-${chars.slice(16, 20)}-${chars.slice(\n    20,\n    32\n  )}`;\n};\n","import React from 'react';\n\nexport const useUpdatedValues = (props: Record<string, unknown>, label: string = '') => {\n  const previousRef = React.useRef<Record<string, unknown>>({});\n  React.useEffect(() => {\n    if (previousRef.current) {\n      const changesObj: Record<string, unknown[]> = {};\n      for (const [key, value] of Object.entries({ ...previousRef.current, ...props })) {\n        if (previousRef.current[key] !== value) {\n          changesObj[key] = [previousRef.current[key], value];\n        }\n      }\n      if (Object.keys(changesObj).length) {\n        console.log(`[updated values] ${label}`, changesObj);\n      }\n    }\n    previousRef.current = props;\n  });\n};\n","import React from 'react';\n\nexport const useTextChangeHandler = (setter: React.Dispatch<React.SetStateAction<string>>) =>\n  React.useCallback((e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => setter(e.currentTarget.value), [\n    setter,\n  ]);\n","import React from 'react';\n\nexport const useToggle = (setter: React.Dispatch<React.SetStateAction<boolean>>) =>\n  React.useCallback(() => setter((s) => !s), [setter]);\n","import React from 'react';\n\nexport type State<SV> = {\n  value: SV;\n  set: React.Dispatch<React.SetStateAction<SV>>;\n};\n\nexport const useState = <SV>(defaultValue: SV | (() => SV)): State<SV> => {\n  const [value, set] = React.useState<SV>(defaultValue);\n  return React.useMemo(() => ({ value, set }), [value, set]);\n};\n","import { createElement } from 'react';\nimport { render } from 'react-dom';\nimport { domReady } from './domReady';\nimport { ReactComponent } from './types';\n\nexport const mountReact = (el: ReactComponent, className?: string) =>\n  domReady(() => {\n    const wrapper = document.createElement('div');\n    if (className) {\n      wrapper.className = className;\n    }\n    document.body.appendChild(wrapper);\n    render(createElement(el), wrapper);\n  });\n"],"names":["argToArr","argOrArgs","Array","isArray","classNames","i","length","argClassNames","ci","push","key","trim","args","slice","call","arguments","classNameStrings","className","includes","join","noop","eventName","isIframe","document","documentElement","isLoaded","readyState","match","addEventListener","onLoad","removeEventListener","domReady","addedListener","window","setTimeout","undefined","handler","e","randomId","id","Math","random","toString","currentId","nextId","fakeUuid","chars","useUpdatedValues","props","label","previousRef","React","useRef","useEffect","current","changesObj","Object","entries","_i","_Object$entries","value","_Object$entries$_i","keys","console","log","useTextChangeHandler","setter","useCallback","currentTarget","useToggle","s","useState","defaultValue","set","_React$useState","useMemo","mountReact","el","wrapper","createElement","body","appendChild","render"],"mappings":"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"}