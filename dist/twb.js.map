{"version":3,"file":"twb.js","sources":["../src/classNames.ts","../src/noop.ts","../src/domReady.ts","../src/randomId.ts","../src/mountReact.ts","../src/createContext.ts","../src/stopPropagation.ts","../src/useState.ts","../src/useTextChangeHandler.ts","../src/useToggle.ts","../src/useUpdatedValues.ts"],"sourcesContent":["type Arg = string | Record<string, any> | undefined | null | number | Arg[];\n\nconst argToArr = (argOrArgs: Arg): string[] => {\n  if (typeof argOrArgs === 'string' || typeof argOrArgs === 'number') {\n    return [`${argOrArgs}`];\n  } else if (Array.isArray(argOrArgs)) {\n    let classNames: string[] = [];\n\n    for (let i = 0; i < argOrArgs.length; i++) {\n      const argClassNames = argToArr(argOrArgs[i]);\n      for (let ci = 0; ci < argClassNames.length; ci++) {\n        classNames.push(argClassNames[ci] as string);\n      }\n    }\n    return classNames;\n  } else {\n    const classNames: string[] = [];\n    for (let key in argOrArgs) {\n      if (argOrArgs[key]) {\n        classNames.push(key.trim());\n      }\n    }\n    return classNames;\n  }\n};\n\nexport const classNames = (...args: Arg[]): string => {\n  const classNames: string[] = [];\n  for (let i = 0; i < args.length; i++) {\n    if (args[i]) {\n      const classNameStrings = argToArr(args[i] as Arg);\n      for (let ci = 0; ci < classNameStrings.length; ci++) {\n        let className = classNameStrings[ci];\n        if (className) {\n          className = className.trim();\n          if (!classNames.includes(className)) {\n            classNames.push(className);\n          }\n        }\n      }\n    }\n  }\n  return classNames.join(' ');\n};\n","export const noop = () => {};\n","import { noop } from './noop';\n\nexport type DomReadyArg = (e?: Event) => void;\nexport type DomReadyReturn = () => void;\n\nconst eventName: string = 'DOMContentLoaded';\nconst isIframe: boolean = 'doScroll' in document.documentElement;\nlet isLoaded: boolean = !!document.readyState.match(isIframe ? /^loaded|^c/ : /^loaded|^i|^c/);\n\nconst onLoad = function () {\n  isLoaded = true;\n  document.removeEventListener(eventName, onLoad);\n};\n\nif (!isLoaded) {\n  document.addEventListener(eventName, onLoad);\n}\n\n/**\n * Helper that will fire provided function if DOM is already loaded or after it will be loaded.\n * @param addedListener\n */\nexport const domReady = (addedListener: DomReadyArg): DomReadyReturn => {\n  if (!isLoaded) {\n    const handler = function (e: Event) {\n      document.removeEventListener('eventName', addedListener);\n      addedListener(e);\n    };\n\n    document.addEventListener(eventName, handler);\n    return function () {\n      document.removeEventListener(eventName, handler);\n    };\n  } else {\n    window.setTimeout(() => addedListener(undefined), 0);\n    return noop;\n  }\n};\n","export const randomId = (length?: number, radix?: number): string => {\n  let id = '';\n  if (!length || length <= 0) {\n    length = 6;\n  }\n  if (!radix || radix < 2 || radix > 36) {\n    radix = 16;\n  }\n  while (id.length < length) {\n    id += Math.random().toString(radix).slice(2);\n  }\n  return id.slice(0, length);\n};\n\nlet currentId = 0;\nexport const nextId = (): string => {\n  return (currentId++).toString(16);\n};\n\nexport const fakeUuid = (): string => {\n  const chars = randomId(32, 16);\n  return `${chars.slice(0, 8)}-${chars.slice(8, 12)}-${chars.slice(12, 16)}-${chars.slice(16, 20)}-${chars.slice(\n    20,\n    32\n  )}`;\n};\n","import { createElement } from 'react';\nimport { render } from 'react-dom';\nimport { createRoot } from 'react-dom/client';\nimport { domReady } from './domReady';\nimport { ReactComponent } from './types';\n\nexport function createWrapper<K extends keyof HTMLElementTagNameMap>(\n  className?: string,\n  element: K = 'div' as K\n): HTMLElementTagNameMap[K] {\n  const wrapper = document.createElement(element);\n  if (className) {\n    wrapper.className = className;\n  }\n  return wrapper;\n}\n\nexport function mountReact(el: ReactComponent, className?: string) {\n  domReady(() => {\n    const wrapper = createWrapper(className);\n    document.body.appendChild(wrapper);\n    render(createElement(el), wrapper);\n  });\n}\n\nexport function mountRoot(el: ReactComponent, className?: string) {\n  domReady(() => {\n    const wrapper = createWrapper(className);\n    document.body.appendChild(wrapper);\n    const root = createRoot(wrapper);\n    root.render(createElement(el));\n  });\n}\n","import React from 'react';\nimport type { UnknownRecord, FCC } from './types';\n\ntype Hook<SV> = () => SV;\ntype CCR<SV> = [Hook<SV>, FCC, React.Context<SV | undefined>];\n\nexport const createContext = <SV extends UnknownRecord>(useHook: Hook<SV>): CCR<SV> => {\n  const ctx = React.createContext<SV | undefined>(undefined);\n\n  return [\n    (): SV => {\n      const contextValue = React.useContext(ctx);\n      if (!contextValue) {\n        throw new Error('context used outside provider');\n      }\n      return contextValue;\n    },\n    ({ children }) => {\n      const value = useHook();\n      return React.createElement(ctx.Provider, { value, children });\n    },\n    ctx,\n  ];\n};\n","import React from \"react\";\n\nexport const stopPropagation = (e: React.SyntheticEvent) => e.stopPropagation();\nexport const preventDefault = (e: React.SyntheticEvent) => e.preventDefault();\nexport const stopPrevent = (e: React.SyntheticEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n}\n","import React from 'react';\n\nexport type State<SV> = {\n  value: SV;\n  set: React.Dispatch<React.SetStateAction<SV>>;\n};\n\nexport const useState = <SV>(defaultValue: SV | (() => SV)): State<SV> => {\n  const [value, set] = React.useState<SV>(defaultValue);\n  return React.useMemo(() => ({ value, set }), [value, set]);\n};\n","import React from 'react';\n\nexport const useTextChangeHandler = (setter: React.Dispatch<React.SetStateAction<string>>) =>\n  React.useCallback((e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => setter(e.currentTarget.value), [\n    setter,\n  ]);\n","import React from 'react';\n\nexport const useToggle = (setter: React.Dispatch<React.SetStateAction<boolean>>) =>\n  React.useCallback(() => setter((s) => !s), [setter]);\n","import React from 'react';\n\nexport const useUpdatedValues = (props: Record<string, unknown>, label: string = '') => {\n  const previousRef = React.useRef<Record<string, unknown>>({});\n  React.useEffect(() => {\n    if (previousRef.current) {\n      const changesObj: Record<string, unknown[]> = {};\n      for (const [key, value] of Object.entries({ ...previousRef.current, ...props })) {\n        if (previousRef.current[key] !== value) {\n          changesObj[key] = [previousRef.current[key], value];\n        }\n      }\n      if (Object.keys(changesObj).length) {\n        console.log(`[updated values] ${label}`, changesObj);\n      }\n    }\n    previousRef.current = props;\n  });\n};\n"],"names":["argToArr","argOrArgs","Array","isArray","classNames","i","length","argClassNames","ci","push","key","trim","noop","eventName","isIframe","document","documentElement","isLoaded","readyState","match","addEventListener","onLoad","removeEventListener","domReady","addedListener","window","setTimeout","undefined","handler","e","randomId","radix","id","Math","random","toString","slice","currentId","createWrapper","className","element","wrapper","createElement","args","call","arguments","classNameStrings","includes","join","useHook","ctx","React","createContext","contextValue","useContext","Error","_ref","children","value","Provider","chars","mountReact","el","body","appendChild","render","createRoot","preventDefault","stopPropagation","defaultValue","useState","set","_React$useState","useMemo","setter","useCallback","currentTarget","s","props","label","previousRef","useRef","useEffect","current","changesObj","Object","entries","_i","_Object$entries","_Object$entries$_i","keys","console","log"],"mappings":"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"}